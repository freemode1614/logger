{"version":3,"sources":["../src/index.ts"],"names":["levelPriority","chalk"],"mappings":"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","file":"index.cjs","sourcesContent":["import chalk from \"chalk\";\n\nexport type LoggerFunction = (...messages: unknown[]) => void;\n\nenum levelPriority {\n  trace,\n  debug,\n  info,\n  warn,\n  error,\n}\n\nexport type DebugLevel = keyof typeof levelPriority;\n\nfunction setLevel(level: DebugLevel) {\n  if ((level === \"trace\" || level === \"debug\") && PROD) {\n    return;\n  }\n\n  currentLevel = level;\n}\n\nexport interface LoggerMethods {\n  trace: LoggerFunction;\n  debug: LoggerFunction;\n  info: LoggerFunction;\n  warn: LoggerFunction;\n  error: LoggerFunction;\n  setLevel: (level: DebugLevel) => void;\n}\n\nconst isBrowser = \"HTMLElement\" in globalThis;\n\n// @ts-expect-error import.meta.env exisit in vite.\nconst DEV = isBrowser ? import.meta.env.DEV : process.env.NODE_ENV === \"development\";\n\n// @ts-expect-error import.meta.env exisit in vite.\nconst PROD = isBrowser ? import.meta.PROD : process.env.NODE_ENV === \"production\";\n\nlet currentLevel: DebugLevel = DEV ? \"debug\" : \"info\";\n\nconst isWorker = \"HTMLRewriter\" in globalThis;\nconst supportsColor = !isWorker;\n\nexport const logger: LoggerMethods = {\n  trace: (...messages: unknown[]) => log(\"trace\", undefined, messages),\n  debug: (...messages: unknown[]) => log(\"debug\", undefined, messages),\n  info: (...messages: unknown[]) => log(\"info\", undefined, messages),\n  warn: (...messages: unknown[]) => log(\"warn\", undefined, messages),\n  error: (...messages: unknown[]) => log(\"error\", undefined, messages),\n  setLevel,\n};\n\nexport function createScopedLogger(scope: string): LoggerMethods {\n  return {\n    trace: (...messages: unknown[]) => log(\"trace\", scope, messages),\n    debug: (...messages: unknown[]) => log(\"debug\", scope, messages),\n    info: (...messages: unknown[]) => log(\"info\", scope, messages),\n    warn: (...messages: unknown[]) => log(\"warn\", scope, messages),\n    error: (...messages: unknown[]) => log(\"error\", scope, messages),\n    setLevel,\n  };\n}\n\nfunction log(level: DebugLevel, scope: string | undefined, messages: unknown[]) {\n  if (levelPriority[level] < levelPriority[currentLevel]) return;\n\n  const date = new Date();\n  const timestamp = date.toLocaleDateString() + \" \" + date.toLocaleTimeString([], { hour12: false });\n\n  const formattedMessages = (messages as string[]).reduce((accumulator, current) => {\n    if (typeof current === \"object\") {\n      return accumulator + \"\\n\" + JSON.stringify(current, undefined, 2);\n    }\n\n    if (accumulator.endsWith(\"\\n\")) {\n      return accumulator + current;\n    }\n\n    if (!accumulator) {\n      return current;\n    }\n\n    return `${accumulator} ${current}`;\n  }, ``);\n\n  if (!supportsColor) {\n    console.log(`[${timestamp}] [${level.toUpperCase()}]`, formattedMessages);\n\n    return;\n  }\n\n  const labelBackgroundColor = getColorForLevel(level);\n  const labelTextColor = level === \"warn\" ? \"#000000\" : \"#FFFFFF\";\n\n  if (isBrowser) {\n    const labelStyles = getLabelStyles(labelBackgroundColor, labelTextColor);\n    const scopeStyles = getLabelStyles(\"#77828D\", \"#FFFFFF\");\n\n    const styles = [labelStyles];\n\n    if (typeof scope === \"string\") {\n      styles.push(\"\", scopeStyles);\n    }\n\n    console.log(`[${timestamp}]%c${level.toUpperCase()}${scope ? `%c %c${scope}` : \"\"}`, ...styles, formattedMessages);\n  } else {\n    const labelStyled = getStyledLabel(labelBackgroundColor, labelTextColor, level.toUpperCase());\n    const scopeStyled = getStyledLabel(\"#77828D\", \"white\", scope);\n\n    console.log(`[${timestamp}]`, labelStyled, scopeStyled, formattedMessages);\n  }\n}\n\nfunction getLabelStyles(color: string, textColor: string) {\n  return `background-color: ${color}; color: white; border: 4px solid ${color}; color: ${textColor}; `;\n}\n\nfunction getStyledLabel(bgColor: string, textColor: string, text?: string) {\n  return text ? chalk.bgHex(bgColor).hex(textColor).bold(text) : \"\";\n}\n\nfunction getColorForLevel(level: DebugLevel): string {\n  switch (level) {\n    case \"trace\":\n    case \"debug\": {\n      return \"#77828D\";\n    }\n    case \"info\": {\n      return \"#1389FD\";\n    }\n    case \"warn\": {\n      return \"#FFDB6C\";\n    }\n    case \"error\": {\n      return \"#EE4744\";\n    }\n    default: {\n      return \"#000000\";\n    }\n  }\n}\n"]}